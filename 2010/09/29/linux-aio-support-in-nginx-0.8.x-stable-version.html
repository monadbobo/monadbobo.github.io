<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>nginx 0.8.x稳定版对linux aio的支持 | pagefault</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">nginx 0.8.x稳定版对linux aio的支持</h1><a id="logo" href="/.">pagefault</a><p class="description">但行好事 莫問前程</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">nginx 0.8.x稳定版对linux aio的支持</h1><div class="post-meta">Sep 29, 2010<span> | </span><span class="category"><a href="/categories/nginx/">nginx</a><a href="/categories/nginx/server/">server</a></span></div><div class="post-content"><p>前几天nginx的0.8.x正式成为stable，然后看了下代码，发现0.8加入了linux native aio的支持，我们知道在linux下有两种aio，一种是glibc实现的aio，这个比较烂，它是直接在用户空间用pthread进行模拟的。还有一种就是内核实现的aio，这些系统调用是以io_xxx开始的，而在nginx的0.8 中使用的是后一种,下面我们简称后一种为native aio.这里注意native aio只支持direct io。</p>
<a id="more"></a>
<p>而native aio的优点就是能够同时提交多个io请求给内核，然后直接由内核的io调度算法去处理这些请求(direct io)，这样的话，内核就有可能执行一些合并，优化。</p>
<p>native aio包含下面几个系统调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">io_setup(2),io_cancel(2), io_destroy(2), io_getevents(2), io_submit(2)</span><br></pre></td></tr></table></figure>
<p>要使用他们必须安装libaio这个库，这个库也就是简单的封装了上面的几个系统调用，而nginx中没有使用libaio这个库，而是直接使用syscall来调用系统调用。现在先大概介绍下这几个api，io_setup用于建立一个aio的环境，io_cancel用于删除一个提交的句柄的任务。io_getevents用于得到任务执行完毕之后的事件信息。io_submit用于提交任务。详细的api介绍去看man手册。</p>
<p>然后就来看nginx是如何使用它的。这里nginx是这样处理的，它利用了系统调用eventfd，用eventfd建立一个句柄，然后将这个句柄加入到epoll中监听，然后在io_submit提交任务的时候，将aio_flags设置为IOCB_FLAG_RESFD，并且aio_resfd设置为eventfd建立的那个句柄，这样当io请求完成后，会象aio_resfd中写入完成的请求数，然后此时epoll就接到可读通知，从而进行后续操作。</p>
<p>首先是在ngx_epoll_init中，这里主要是建立aio的环境.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">#if (NGX_HAVE_FILE_AIO)</span><br><span class="line">          </span><br><span class="line">&#123;</span><br><span class="line">          </span><br><span class="line">int n;</span><br><span class="line">          </span><br><span class="line">struct epoll_event ee;</span><br><span class="line">  </span><br><span class="line">//调用eventfd</span><br><span class="line">          </span><br><span class="line">ngx_eventfd = syscall(SYS_eventfd, 0);</span><br><span class="line"></span><br><span class="line">if (ngx_eventfd == -1) &#123;</span><br><span class="line">              </span><br><span class="line">ngx_log_error(NGX_LOG_EMERG, cycle-&gt;log, ngx_errno,</span><br><span class="line">                            </span><br><span class="line">&quot;eventfd() failed&quot;);</span><br><span class="line">              </span><br><span class="line">return NGX_ERROR;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">n = 1;</span><br><span class="line">  </span><br><span class="line">//设置异步</span><br><span class="line">          </span><br><span class="line">if (ioctl(ngx_eventfd, FIONBIO, &amp;n) == -1) &#123;</span><br><span class="line">              </span><br><span class="line">ngx_log_error(NGX_LOG_EMERG, cycle-&gt;log, ngx_errno,</span><br><span class="line">                            </span><br><span class="line">&quot;ioctl(eventfd, FIONBIO) failed&quot;);</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ngx_log_debug1(NGX_LOG_DEBUG_EVENT, cycle-&gt;log, 0,</span><br><span class="line">                         </span><br><span class="line">&quot;eventfd: %d&quot;, ngx_eventfd);</span><br><span class="line">  </span><br><span class="line">//安装aio的环境</span><br><span class="line">          </span><br><span class="line">n = io_setup(1024, &amp;ngx_aio_ctx);</span><br><span class="line"></span><br><span class="line">if (n != 0) &#123;</span><br><span class="line">              </span><br><span class="line">ngx_log_error(NGX_LOG_EMERG, cycle-&gt;log, -n, &quot;io_setup() failed&quot;);</span><br><span class="line">              </span><br><span class="line">return NGX_ERROR;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">//设置将要传递给epoll的数据，可以看到都是和eventfd关联的</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_event.data = &amp;ngx_eventfd_conn;</span><br><span class="line">  </span><br><span class="line">//这个就是当eventfd可读被通知后，epoll所将要执行的读方法。</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_event.handler = ngx_epoll_eventfd_handler;</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_event.log = cycle-&gt;log;</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_event.active = 1;</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_conn.fd = ngx_eventfd;</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_conn.read = &amp;ngx_eventfd_event;</span><br><span class="line">          </span><br><span class="line">ngx_eventfd_conn.log = cycle-&gt;log;</span><br><span class="line">  </span><br><span class="line">//检测可读事件</span><br><span class="line">          </span><br><span class="line">ee.events = EPOLLIN|EPOLLET;</span><br><span class="line">          </span><br><span class="line">ee.data.ptr = &amp;ngx_eventfd_conn;</span><br><span class="line">  </span><br><span class="line">//加入到epoll中。</span><br><span class="line">          </span><br><span class="line">if (epoll_ctl(ep, EPOLL_CTL_ADD, ngx_eventfd, &amp;ee) == -1) &#123;</span><br><span class="line">              </span><br><span class="line">ngx_log_error(NGX_LOG_EMERG, cycle-&gt;log, ngx_errno,</span><br><span class="line">                            </span><br><span class="line">&quot;epoll_ctl(EPOLL_CTL_ADD, eventfd) failed&quot;);</span><br><span class="line">              </span><br><span class="line">return NGX_ERROR;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">#endif</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后是提交任务，这个动作是在ngx_file_aio_read中进行的。它主要是设置io_submit所需要的参数，然后传递io请求给io_submit.这里有个关键的就是aio_flags的设置，这个标记说明我们要使用aio_resfd来接收aio执行的结果。其实也就是执行的io任务的个数.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">ngx_memzero(&amp;aio-&gt;aiocb, sizeof(struct iocb));</span><br><span class="line"></span><br><span class="line">aio-&gt;aiocb.aio_data = (uint64_t) (uintptr_t) ev;</span><br><span class="line">  </span><br><span class="line">//这里设置是读，nginx只使用到了异步读取</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_lio_opcode = IOCB_CMD_PREAD;</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_fildes = file-&gt;fd;</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_buf = (uint64_t) (uintptr_t) buf;</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_nbytes = size;</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_offset = offset;</span><br><span class="line">  </span><br><span class="line">//设置标记</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_flags = IOCB_FLAG_RESFD;</span><br><span class="line">      </span><br><span class="line">aio-&gt;aiocb.aio_resfd = ngx_eventfd;</span><br><span class="line"></span><br><span class="line">ev-&gt;handler = ngx_file_aio_event_handler;</span><br><span class="line"></span><br><span class="line">piocb[0] = &amp;aio-&gt;aiocb;</span><br><span class="line">  </span><br><span class="line">//提交请求</span><br><span class="line">      </span><br><span class="line">n = io_submit(ngx_aio_ctx, 1, piocb);</span><br></pre></td></tr></table></figure>
<p>最后是当io请求完成后，nginx的回调函数如何处理的。前面的代码分析我们知道回调函数是ngx_epoll_eventfd_handler，因此我们就来看这个函数，它的流程比较简单，首先从eventfd中读取返回的事件个数，然后调用io_getevents来获得所完成的io请求事件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">static void</span><br><span class="line">  </span><br><span class="line">ngx_epoll_eventfd_handler(ngx_event_t *ev)</span><br><span class="line">  </span><br><span class="line">&#123;</span><br><span class="line">      </span><br><span class="line">int n;</span><br><span class="line">      </span><br><span class="line">long i, events;</span><br><span class="line">      </span><br><span class="line">uint64_t ready;</span><br><span class="line">      </span><br><span class="line">ngx_err_t err;</span><br><span class="line">      </span><br><span class="line">ngx_event_t *e;</span><br><span class="line">      </span><br><span class="line">ngx_event_aio_t *aio;</span><br><span class="line">      </span><br><span class="line">struct io_event event[64];</span><br><span class="line">      </span><br><span class="line">struct timespec ts;</span><br><span class="line"></span><br><span class="line">ngx_log_debug0(NGX_LOG_DEBUG_EVENT, ev-&gt;log, 0, &quot;eventfd handler&quot;);</span><br><span class="line">  </span><br><span class="line">//开始读取完成的</span><br><span class="line">      </span><br><span class="line">n = read(ngx_eventfd, &amp;ready, 8);</span><br><span class="line"></span><br><span class="line">err = ngx_errno;</span><br><span class="line">  </span><br><span class="line">&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;..</span><br><span class="line"></span><br><span class="line">ts.tv_sec = 0;</span><br><span class="line">      </span><br><span class="line">ts.tv_nsec = 0;</span><br><span class="line"></span><br><span class="line">while (ready) &#123;</span><br><span class="line">  </span><br><span class="line">//用来得到所完成event，events就是事件的个数,而event则是一个事件数组</span><br><span class="line">          </span><br><span class="line">events = io_getevents(ngx_aio_ctx, 1, 64, event, &amp;ts);</span><br><span class="line"></span><br><span class="line">ngx_log_debug1(NGX_LOG_DEBUG_EVENT, ev-&gt;log, 0,</span><br><span class="line">                         </span><br><span class="line">&quot;io_getevents: %l&quot;, events);</span><br><span class="line"></span><br><span class="line">if (events &gt; 0) &#123;</span><br><span class="line">              </span><br><span class="line">ready -= events;</span><br><span class="line">  </span><br><span class="line">//遍历event，然后处理事件.</span><br><span class="line">              </span><br><span class="line">for (i = 0; i &lt; events; i++) &#123;</span><br><span class="line"></span><br><span class="line">ngx_log_debug4(NGX_LOG_DEBUG_EVENT, ev-&gt;log, 0,</span><br><span class="line">                                 </span><br><span class="line">&quot;io_event: %uXL %uXL %L %L&quot;,</span><br><span class="line">                                  </span><br><span class="line">event[i].data, event[i].obj,</span><br><span class="line">                                  </span><br><span class="line">event[i].res, event[i].res2);</span><br><span class="line"></span><br><span class="line">e = (ngx_event_t *) (uintptr_t) event[i].data;</span><br><span class="line"></span><br><span class="line">e-&gt;complete = 1;</span><br><span class="line">                  </span><br><span class="line">e-&gt;active = 0;</span><br><span class="line">                  </span><br><span class="line">e-&gt;ready = 1;</span><br><span class="line"></span><br><span class="line">aio = e-&gt;data;</span><br><span class="line">                  </span><br><span class="line">aio-&gt;res = event[i].res;</span><br><span class="line">  </span><br><span class="line">//post事件</span><br><span class="line">                  </span><br><span class="line">ngx_post_event(e, &amp;ngx_posted_events);</span><br><span class="line">              </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">continue;</span><br><span class="line">          </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;&amp;#8230;..</span><br><span class="line">      </span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/nginx/">nginx</a><a href="/tags/server/">server</a><a href="/tags/aio/">aio</a></div><div class="post-nav"><a class="pre" href="/2010/10/02/how-to-get-the-current-process-information-in-linux-kernel.html">linux kernel中如何得到当前的进程信息</a><a class="next" href="/2010/09/26/processing-http-header-in-nginx-(2).html">nginx中处理http header详解(2)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/SPDY/">SPDY</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SPDY/协议/">协议</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/">erlang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/源码阅读/">源码阅读</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/mac/">mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/server/">server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/协议/">协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/源码阅读/">源码阅读</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/lua/源码阅读/">源码阅读</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/server/">server</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/server/源码阅读/">源码阅读</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/协议/">协议</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/语言规范/">语言规范</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/rocksdb/" style="font-size: 15px;">rocksdb</a> <a href="/tags/kernel/" style="font-size: 15px;">kernel</a> <a href="/tags/lua/" style="font-size: 15px;">lua</a> <a href="/tags/opensource/" style="font-size: 15px;">opensource</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/server/" style="font-size: 15px;">server</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/aio/" style="font-size: 15px;">aio</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/process/" style="font-size: 15px;">process</a> <a href="/tags/qemu/" style="font-size: 15px;">qemu</a> <a href="/tags/google/" style="font-size: 15px;">google</a> <a href="/tags/协议/" style="font-size: 15px;">协议</a> <a href="/tags/路由/" style="font-size: 15px;">路由</a> <a href="/tags/tcp/" style="font-size: 15px;">tcp</a> <a href="/tags/TFO/" style="font-size: 15px;">TFO</a> <a href="/tags/rfc/" style="font-size: 15px;">rfc</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/语言规范/" style="font-size: 15px;">语言规范</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/spdy/" style="font-size: 15px;">spdy</a> <a href="/tags/kenel/" style="font-size: 15px;">kenel</a> <a href="/tags/tcp-ip/" style="font-size: 15px;">tcp/ip</a> <a href="/tags/sever/" style="font-size: 15px;">sever</a> <a href="/tags/cache/" style="font-size: 15px;">cache</a> <a href="/tags/fs/" style="font-size: 15px;">fs</a> <a href="/tags/rfs/" style="font-size: 15px;">rfs</a> <a href="/tags/congest/" style="font-size: 15px;">congest</a> <a href="/tags/web-server/" style="font-size: 15px;">web server</a> <a href="/tags/tcp-cork/" style="font-size: 15px;">tcp_cork</a> <a href="/tags/服务器设计/" style="font-size: 15px;">服务器设计</a> <a href="/tags/keepalive/" style="font-size: 15px;">keepalive</a> <a href="/tags/pipeline/" style="font-size: 15px;">pipeline</a> <a href="/tags/server，mm/" style="font-size: 15px;">server，mm</a> <a href="/tags/epoll/" style="font-size: 15px;">epoll</a> <a href="/tags/erlang/" style="font-size: 15px;">erlang</a> <a href="/tags/mochiweb/" style="font-size: 15px;">mochiweb</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/loadbalance/" style="font-size: 15px;">loadbalance</a> <a href="/tags/InnoDB/" style="font-size: 15px;">InnoDB</a> <a href="/tags/glibc/" style="font-size: 15px;">glibc</a> <a href="/tags/systemcall/" style="font-size: 15px;">systemcall</a> <a href="/tags/心情/" style="font-size: 15px;">心情</a> <a href="/tags/gro/" style="font-size: 15px;">gro</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/04/18/design-and-implementation-of-mtr-(mini-transaction).html">MTR(mini-transaction)设计与实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/17/design-and-implementation-of-linkbuf-in-innodb.html">InnoDB中LinkBuf设计与实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/17/innodb-tablespace-source-code-analysis.html">InnoDB tablespace源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/19/.html">MySQL · RocksDB · 数据的读取(二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/13/mysql-rocksdb.-data-reading-(i).html">MySQL · RocksDB · 数据的读取(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/27/mysql-rocksdb-level-compact-analysis.html">MySQL · RocksDB · Level Compact 分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/07/mysql-rocksdb-memtable-flush-analysis.html">MySQL · RocksDB · Memtable flush分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/08/writing-of-mysql.-rocksdb.-memtable.html">MySQL · RocksDB ·  MemTable的写入</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/04/implementation-of-mysql-rocksdb-writing-logic.html">MySQL · RocksDB ·  写入逻辑的实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/06/introduction-to-mysql-rocksdb-column-family.html">MySQL · RocksDB · Column Family介绍</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">pagefault.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>